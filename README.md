# Application Form (Fullâ€‘Stack)

**A simple full-stack application** that demonstrates a multi-step application form built with React (frontend) and Node.js + Express + MongoDB. It includes validation, draft persistence, server-side metrics (Prometheus), structured logging, and an optional observability stack (Prometheus/Grafana/Loki). âœ…

---

## ğŸ”§ Features

- Multi-step form with client-side validation and draft auto-save (localStorage)
- React frontend (CRA) and Express backend
- MongoDB persistence for submitted applications
- Structured logging (Pino) with logs stored at `backend/logs` ğŸ”
- Prometheus metrics exposed at `/metrics` and a health check at `/health` âœ…
- Docker Compose stack for Prometheus, Grafana, Loki, and Promtail

---

## ğŸ“ Project structure

- `backend/` - Express API, Mongoose models, logging, and metrics
- `frontend/` - React app (multi-step form)
- `docker-compose.yml` - Monitoring stack (Prometheus, Grafana, Loki, Promtail)
- `prometheus/`, `loki/`, `promtail/` - Monitoring configs

---

## ğŸ› Architecture (visual)

A high-level diagram shows where components live and how they interact. The image below references the committed SVG (scalable) and is also available from `docs/architecture/images`.

![Architecture diagram](docs/architecture/images/architecture.svg)

---

---

## ğŸš€ Quick start (local)

### Prerequisites

- Node.js 18+ & npm
- MongoDB (local or cloud URI) or use a managed DB
- Docker & Docker Compose (optional, for monitoring stack)

### 1) Backend

```bash
cd backend
npm install
# Create a .env file (see example below)
npm run dev    # uses nodemon for development
# or
npm start      # production-style start
```

### 2) Frontend

```bash
cd frontend
npm install
npm start
# Open http://localhost:3000
```

### Example `.env` for `backend` (create `backend/.env`)

```
MONGODB_URI=mongodb://localhost:27017/application_db
PORT=5000
LOG_LEVEL=info
FRONTEND_BASE_URL=http://localhost:3000
```

---

## ğŸ“¡ Monitoring & Logging

- Prometheus is used to expose metrics (custom metrics in `backend/metrics.js`) at `/metrics`.
- Logs are written using Pino to `backend/logs/backend.log`.
- `docker-compose.yml` starts Prometheus, Grafana, Loki, and Promtail for a complete observability stack:

```bash
# from repo root
docker-compose up -d
# Grafana: http://localhost:3001 (default admin password: admin)
# Prometheus: http://localhost:9090
# Loki: http://localhost:3100
```

> Tip: Promtail in the compose file reads from `./backend/logs` and forwards logs to Loki (see `promtail/promtail-config.yml`).

---

## ğŸ§­ API Reference

Base path: `http://localhost:5000/api`

- POST `/api/submit` â€” Submit an application (JSON body) â†’ returns `{ applicationId, transactionId, thankYouUrl, ... }`
- GET `/api/applications` â€” List all applications
- GET `/api/applications/:id` â€” Get application by MongoDB _id or applicationId (UUID)

Server-only endpoints:
- GET `/health` â€” health check (200 OK)
- GET `/metrics` â€” Prometheus metrics (Prom client)

Example cURL:

```bash
curl -X POST http://localhost:5000/api/submit \
  -H "Content-Type: application/json" \
  -d '{"firstName":"Jane","lastName":"Doe","email":"jane@example.com","phone":"1234567890","dateOfBirth":"1990-01-01","street":"1 Main St","city":"Town","state":"State","zipCode":"12345","country":"Country","highestDegree":"BSc","institution":"Uni","graduationYear":2012,"fieldOfStudy":"CS","yearsOfExperience":5}'
```

---

## âœ… Frontend behavior highlights

- Form is split across steps: Personal, Address, Education, Work Experience, Review
- Client-side validation per-step with helpful error messages
- Draft persistence: form state saved to `localStorage` as `application_draft` and `application_step`
- On successful submit the user is redirected to a thank-you page using `thankYouUrl` provided by client or generated by the server

---

## ğŸ§ª Tests & Linting

- Frontend: `npm test` (CRA default test runner)
- Backend: No tests included by default â€” adding unit/integration tests is recommended

---

## â™»ï¸ Deploying

- Build the frontend: `cd frontend && npm run build` and serve with your preferred static host
- Configure `MONGODB_URI` and other env vars in your production environment
- Consider containerizing the backend and frontend for production deployments

---

## ğŸ¤ Contributing

Contributions are welcome. Please open issues for bugs or feature requests and submit PRs with clear descriptions and tests where applicable.

---

## ğŸ“œ License

This project is provided as-is. Add a license file if you want to specify reuse terms.

---

If you'd like, I can add a couple of screenshots, update the `.env` examples, or add a GitHub Actions workflow to build/test the project. ğŸ’¡

## ğŸ“ Recent changes (2026-01-12)

- Repository pushed to: https://github.com/sitansh/application-form.git
- Added VS Code run tasks to start servers locally:
  - `Start Backend Server`: `cd backend && npm start`
  - `Start Frontend Server`: `cd frontend && npm start`

You can run these directly from the terminal or use the VS Code `Run Task` UI (named tasks are defined in the workspace). The repository now includes the backend tests under `backend/tests`.